<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4t4t4</title>
    <!-- Include ArtPlayer library -->
    <script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
    <!-- Include Hls.js library -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js"></script>
    <!-- Include ArtPlayer HLS Quality Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-hls-quality/dist/artplayer-plugin-hls-quality.min.js"></script>
    <!-- Include ArtPlayer Ads Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-ads/dist/artplayer-plugin-ads.min.js"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .artplayer-app {
            width: 100%;
            height: 100%;
            background: #000000; /* Set a background color for the player */
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>

<!-- Create a container for the player -->
<div class="artplayer-app"></div>

<script>
function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    // Get movielink and adlink from URL parameters
    var movielink = getParameterByName('movielink');
    var adlink = getParameterByName('adlink');
    // Initialize ArtPlayer with Ad and HLS Quality Switching
    var art = new Artplayer({
        container: '.artplayer-app',
        url: ' + movielink + ',
        autoSize: true,
        fullscreen: true,
        setting: true,
        volume: 0.5,
        isLive: false,
        muted: false,
        autoplay: false,
        pip: false,
        autoMini: true,
        loop: false,
        flip: false,
        playbackRate: true,
        aspectRatio: true,
        fullscreen: true,
        subtitleOffset: false,
        miniProgressBar: true,
        mutex: true,
        backdrop: true,
        playsInline: false,
        autoPlayback: true,
        airplay: false,
        theme: '#05C546',
        plugins: [
            artplayerPluginAds({
                // HTML广告，假如是视频广告则忽略该值
                html: '<img src="https://video.wixstatic.com/video/3e4e16_b659a4bf001d472d914b4999ded1b837/1080p/mp4/file.mp4" alt="Ad Poster">',

                // 视频广告的地址
                video: ' + adlink + ',

                // 广告跳转网址，为空则不跳转
                url: '',

                // 必须观看的时长，期间不能被跳过，单位为秒
                // 当该值大于或等于totalDuration时，不能提前关闭广告
                // 当该值等于或小于0时，则随时都可以关闭广告
                playDuration: 5,

                // 广告总时长，单位为秒
                totalDuration: 10,

                // 多语言支持
                i18n: {
                    close: 'Funga',
                    countdown: '%s Amasegonda 5',
                    detail: 'Kwamamaza',
                    canBeClosed: '%s Amasegonda 3',
                },
            }),
            artplayerPluginHlsQuality({
                // Show quality in control
                control: true,

                // Show quality in setting
                setting: true,

                // Get the resolution text from level
                getResolution: (level) => level.height + 'P',

                // I18n
                title: 'Quality',
                auto: 'Auto',
            }),
        ],
        customType: {
            m3u8: function playM3u8(video, url, art) {
                if (Hls.isSupported()) {
                    if (art.hls) art.hls.destroy();
                    const hls = new Hls();
                    hls.loadSource(url);
                    hls.attachMedia(video);
                    art.hls = hls;
                    art.on('destroy', () => hls.destroy());
                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    video.src = url;
                } else {
                    art.notice.show = 'Unsupported playback format: m3u8';
                }
            }
        },
    });
</script>

</body>
</html>
